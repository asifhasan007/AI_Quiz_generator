<div class="quiz-display-container">
  <h1>Quiz from: <a [href]="source" target="_blank">{{ source }}</a></h1>

  <!-- Fallback or Loading Message -->
  <div *ngIf="isLoading" class="loading-state">
    <p>
      <i class="fas fa-spinner fa-spin"></i> Regenerating your quiz, please wait...
    </p>
  </div>
  <div *ngIf="!quiz || quiz.length === 0 && !isLoading" class="no-quiz">
    <p>No quiz data found.</p>
    <button class="btn" (click)="goBackToHome()">Go to Home</button>
  </div>

  <!-- Main Quiz Display -->
  <div *ngIf="quiz.length > 0 && !isLoading">
    <div *ngFor="let question of quiz; let i = index" class="question-block">
      <!-- Question Text, Options, and Answer -->
      <p class="question-text">{{ question.question }}</p>
      <div class="options-list">
        <div *ngIf="question.type === 'Multiple Choice'">
          <div *ngFor="let option of question.options; let j = index">
            {{ getOptionLetter(j) }}. {{ option }}
          </div>
        </div>
        <div *ngIf="question.type === 'True/False'">
          <div>A. True</div>
          <div>B. False</div>
        </div>
      </div>
      <p class="answer-text">ANSWER: {{ getCorrectAnswerLetter(question) }}</p>
    </div>

    <!-- Action Buttons -->
    <div class="button-group">
      <button class="btn back-btn" (click)="goBackToHome()">
        <i class="fas fa-arrow-left"></i> Back to All Quizzes
      </button>
      <button class="btn regenerate-btn" (click)="regenerateQuiz()" [disabled]="isLoading">
        <i class="fas fa-sync-alt"></i> Regenerate Quiz
      </button>
    </div>
  </div>
</div>
